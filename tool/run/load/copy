##
# Load files needed by the scenario via TFTP
#
# \param --load-base-dir     base directory of TFTP
#

source [genode_dir]/tool/run/load.inc


##
# The files are loaded implicitly via TFTP to the target machine
#
proc run_load { } {
	global load_spawn_id
	set load_spawn_id -1

	set tftp_base_dir [load_base_dir]

	if {[string length $tftp_base_dir] > 0} {
		exec cp "[run_dir]/uImage" "$tftp_base_dir/uImage"
	} else {
		puts "Warning, TFTP base directory or TFTP offset directory not set."
		return false
	}

	return true
}


proc load_base_dir { } { return [get_cmd_arg --load-base-dir ""] }


proc load_offset_dir { } { return [get_cmd_arg --load-offset-dir ""] }


proc load_use_absolute { } { return [get_cmd_switch --load-absolute] }
