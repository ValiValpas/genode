##
# Load files needed by the scenario via TFTP
#
# \param --load-base-dir     base directory of TFTP
#

source [genode_dir]/tool/run/load.inc


##
# The files are loaded implicitly via TFTP to the target machine
#
proc run_load { } {
	global load_spawn_id
	set load_spawn_id -1

	set base_dir [load_base_dir]
	set image_name [load_image_name]

	if {[string length $base_dir] > 0} {
		exec cp "[run_dir]/boot/$image_name" "$base_dir/$image_name"
	} else {
		puts "Warning, base directory not set."
		return false
	}

	return true
}

proc load_base_dir { } {
	global default_image_name
	return [get_cmd_arg --load-base-dir "/tmp" ] 
}

proc load_image_name { } { return [get_cmd_arg --load-image-name "image.elf"] }
